<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Prevent_Submission_Without_DM</fullName>
    <active>true</active>
    <description>Prevents an Order from being submitted for approval if the related Account does not have an Account Team Member with the role “Distributor Manager.” This rule applies specifically to Orders created by users with the Partner Community User Profile</description>
    <errorConditionFormula>AND(
    ISPICKVAL(Status, &quot;Submitted/ In Approval&quot;),
				 CreatedBy.Profile.Name =&quot;Synthomer Distributor User&quot;,
				NOT( Account.Has_Distributor_Manager__c )
				
   )</errorConditionFormula>
    <errorMessage>Distributor Manager is missing. Please add an Account Team Member with role ‘Distributor Manager’ before submitting for approval. Contact your system admin if you need assistance.</errorMessage>
</ValidationRule>
